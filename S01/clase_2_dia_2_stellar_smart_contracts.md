# Clase 2 (DÃ­a 2): Stellar y Smart Contracts

---

## Tema 6: Intro a Stellar

### Â¿QuÃ© es Stellar?

**DefiniciÃ³n**: Red blockchain diseÃ±ada para mover valor de forma rÃ¡pida, barata y confiable.

**Enfoque**: Pagos, stablecoins y sistemas financieros globales.

> No es una plataforma generalista para "hacer de todo", sino **infraestructura financiera**.

### El Origen de Stellar

**Fundadores** (2014):
- Jed McCaleb (cofundador de Ripple/XRP)
- Joyce Kim

**Objetivo original**:
> Crear un sistema financiero abierto que permita mover dinero como se mueve informaciÃ³n en internet.

**Problemas que buscÃ³ resolver**:
- Transferencias internacionales lentas y caras
- ExclusiÃ³n financiera
- Dependencia de intermediarios
- FricciÃ³n en pagos transfronterizos

### RelaciÃ³n con XRP (y la Ruptura)

**Similitudes**:
- Ambos buscan pagos rÃ¡pidos
- Ambos usan consenso sin minerÃ­a
- Ambos priorizan eficiencia y bajo costo

**Diferencia clave**:
- **XRP**: EvolucionÃ³ hacia modelo mÃ¡s corporativo
- **Stellar**: Camino open, neutral y **not-for-profit**

> Esa ruptura definiÃ³ el ADN de Stellar.

---

## Stellar Consensus Protocol (SCP)

### Modelo de Consenso Distinto

**NO usa**:
- âŒ Proof of Work (minerÃ­a)
- âŒ Proof of Stake tradicional

**SÃ usa**:
- âœ… **Consenso federado** basado en quorum slices

### Â¿CÃ³mo funciona?

**En tÃ©rminos simples**:
- Cada nodo elige a quiÃ©n confiar
- El consenso emerge de la superposiciÃ³n de confianza
- No hay mineros
- No hay competencia por bloques

### Ventajas de SCP

- âš¡ **RÃ¡pido**: Segundos
- ğŸ’° **Muy barato**: Costos extremadamente bajos
- ğŸŒ± **EnergÃ©ticamente eficiente**: Sin minerÃ­a
- ğŸ“Š **Predecible**: Comportamiento consistente

---

## Stellar Development Foundation (SDF)

### Una FundaciÃ³n Sin Fines de Lucro

**CaracterÃ­sticas de SDF**:
- ğŸ¯ **Not-for-profit**: No busca maximizar ingresos
- ğŸ”“ **No es empresa tradicional**
- ğŸŒ **Enfoque**: Crecimiento del ecosistema

### Rol Principal

- ğŸ›  Mantener el protocolo
- ğŸ’° Financiar proyectos
- ğŸ‘¥ Apoyar desarrolladores
- ğŸ“ˆ Impulsar adopciÃ³n real

**Alineamiento Ãºnico**:
```
Red â†” Ecosistema â†” Usuarios â†” Builders
```

---

## Diferencia con Ethereum

Ethereum y Stellar **no compiten directamente** â€” resuelven problemas distintos.

| CaracterÃ­stica | Ethereum | Stellar |
|----------------|----------|---------|
| **Tipo** | Plataforma generalista | Infraestructura financiera |
| **Enfoque** | Aplicaciones complejas | Pagos y stablecoins |
| **Flexibilidad** | Altamente flexible | Enfocada |
| **Costos** | MÃ¡s costosa | Extremadamente bajos |
| **Velocidad** | MÃ¡s fricciÃ³n para pagos | Alta velocidad |
| **Ideal para** | DApps complejas | Productos financieros |

### AnalogÃ­a Simple

> **Ethereum** = Computadora global  
> **Stellar** = Red financiera global

---

## Smart Contracts en Stellar

### EvoluciÃ³n del Enfoque

**Durante muchos aÃ±os, Stellar se enfocÃ³ en**:
- Pagos
- Assets
- Trustlines
- Liquidez

**Recientemente**: LanzÃ³ plataforma de smart contracts con enfoque distinto.

### FilosofÃ­a de DiseÃ±o

- **No busca copiar EVM** (Ethereum Virtual Machine)
- **Busca**: Seguridad, previsibilidad y eficiencia

### Â¿QuÃ© Permiten?

Los smart contracts en Stellar permiten:
- ğŸ’¼ LÃ³gica financiera
- ğŸ¤– AutomatizaciÃ³n de flujos
- ğŸ” Custodia programable
- ğŸ‘¥ Roles y permisos
- ğŸ— Infraestructura para productos financieros

### Casos de Uso Habilitados

- Escrows
- Sistemas de puntos
- Programas de incentivos
- Productos B2B y B2B2C
- Infraestructura para stablecoins

---

## El Enfoque HistÃ³rico de Stellar

Stellar nunca ha sido una red "de moda".

**Su enfoque siempre ha sido**:
- ğŸ— Infraestructura
- ğŸ’³ Pagos reales
- ğŸ¦ Integraciones con mundo financiero
- ğŸ’µ Stablecoins
- âœ… Casos de uso en producciÃ³n

### Ecosistema TÃ­pico

- On-ramps y off-ramps
- Wallets enfocadas en pagos
- Integraciones con empresas
- Casos de uso en paÃ­ses emergentes

---

## Beneficios Clave de Stellar

1. âš¡ **Transacciones casi instantÃ¡neas**
2. ğŸ’° **Costos extremadamente bajos**
3. ğŸŒ± **Modelo energÃ©tico eficiente**
4. ğŸ’µ **Ideal para stablecoins**
5. ğŸ— **Arquitectura clara y enfocada**
6. ğŸŒ **Ecosistema alineado a casos reales**

---

## Â¿Por QuÃ© Construir sobre Stellar?

Stellar es especialmente interesante si estÃ¡s construyendo:

- ğŸ’¼ Productos financieros
- ğŸ’³ Sistemas de pagos
- ğŸ’µ Infraestructura de stablecoins
- ğŸ›’ Marketplaces
- ğŸ” Escrows
- ğŸ¯ Programas de incentivos
- ğŸ¢ Productos B2B o B2B2C

> Es una red pensada para **productos**, no solo para experimentos.

---

## Idea Clave

> Stellar no es una blockchain "espectacular".  
> Es una blockchain **confiable**.  
>  
> Y en productos financieros,  
> **confiable siempre gana**.

---

# Tema 7: Smart Contracts - EstÃ¡ndares y Herramientas

**Instructor**: MatÃ­as Aguilar (@aguilar1x)
- Full Stack Web3
- Smart Contract Developer
- Co-founder nEKO protocol

---

## IntroducciÃ³n a Smart Contracts

### Â¿QuÃ© son los Smart Contracts?

**DefiniciÃ³n**: CÃ³digo que se ejecuta en una blockchain, viviendo en ella para cumplir diferentes funciones dependiendo de su contexto de creaciÃ³n.

### Â¿QuÃ© es Soroban?

**DefiniciÃ³n**: Motor de contratos inteligentes de Stellar.

**CaracterÃ­sticas**:
- Basado en **Rust**
- Usa **WebAssembly (WASM)**
- Permite ejecutar lÃ³gica avanzada en Stellar

### Â¿QuÃ© es WASM (WebAssembly)?

**DefiniciÃ³n**: Formato binario diseÃ±ado para ejecutar cÃ³digo de manera muy rÃ¡pida.

**Beneficio**: Contratos se ejecutan de forma **segura y rÃ¡pida**.

---

## Buenas PrÃ¡cticas

### 1. Seguridad

**Consideraciones**:
- âœ… Evitar overflow o underflows
- âœ… Controlar acceso (Admins, Users)
- âœ… Respetar estÃ¡ndares SEP
- âœ… No guardar informaciÃ³n innecesaria en storage

### 2. DiseÃ±o

**Principios**:
- ğŸ“¦ Contratos modulares por capas (mod)
- ğŸ“¢ Eventos claros
- ğŸ’¾ Storage explÃ­cito
- ğŸ”„ Pensar en migraciones

### 3. Testing y Costos

**PrÃ¡cticas**:
- ğŸ§ª Unit tests
- ğŸ­ Simular escenarios adversos
- ğŸ’° Minimizar uso de storage
- ğŸ” Evitar loops innecesarios
- âš¡ Optimizar llamadas

---

## EstÃ¡ndares SEP (Stellar Ecosystem Proposals)

### SEP-0001: Stellar Info File

**FunciÃ³n**: Puente con contratos.

**Uso**: Discovery de servicios (anchors, wallets, dapps) que luego interactÃºan con contratos Soroban.

### SEP-0040: Soroban Token Interface

**FunciÃ³n**: EstÃ¡ndar para tokens en Soroban.

**Importancia**: Esencial para interoperabilidad entre tokens.

### SEP-0041: Oracle Consumer Interface

**FunciÃ³n**: Puente con contratos.

**Uso**: Define cÃ³mo consumir datos externos confiables (oracles).

### SEP-0046: Contract Meta

**FunciÃ³n**: Metadatos estandarizados de contratos.

**Uso**: Para tooling, UIs y auditorÃ­a.

### SEP-0048: Contract Interface Specification

**FunciÃ³n**: Especifica cÃ³mo describir interfaces.

**Uso**: Base para tooling y Developer Experience (DX).

---

## CAP (Core Advancement Proposals)

### CAP-0046: Soroban Smart Contract System

**VisiÃ³n general del sistema de smart contracts**.

### CAP-0046-01: WebAssembly Runtime Environment

**Runtime WASM** para contratos inteligentes.

### CAP-0046-02: Fee Model in Smart Contracts

**Modelo de fees** en Soroban.

### CAP-0046-07: Smart Contract Lifecycle

**Ciclo de vida del contrato** (deploy, invoke, upgrade).

### CAP-0046-11: Soroban Authorization Framework

**AutorizaciÃ³n y firmas** en contratos.

---

## Â¿QuÃ© Cambia para Developers?

> "Ok, existen los estÃ¡ndaresâ€¦ pero Â¿quÃ© cambia para nosotros como developers?"

**Respuesta**:
- ğŸ“š **Interoperabilidad**: Tus contratos funcionan con otros del ecosistema
- ğŸ›  **Tooling mejorado**: Herramientas entienden tus contratos
- ğŸ”’ **Seguridad**: Patrones probados reducen riesgos
- ğŸ“– **DocumentaciÃ³n consistente**: MÃ¡s fÃ¡cil de entender y usar
- ğŸ¤ **ColaboraciÃ³n**: Equipos hablan el mismo lenguaje

---

## OpenZeppelin

### Â¿QuÃ© es OpenZeppelin?

> El punto de partida ideal para cualquier smart contract: cÃ³digo auditado, seguro y modular listo para extender.

### Â¿Por QuÃ© Usar OpenZeppelin?

#### 1. Implementaciones Auditadas ğŸ”’

- Contratos revisados por expertos
- Probados y confiables
- Te evita reinventar lÃ³gica crÃ­tica
- Reduce riesgos

#### 2. Buenas PrÃ¡cticas de DiseÃ±o ğŸ“

- CÃ³digo modular, legible y consistente
- Sigue estÃ¡ndares del ecosistema
- Contratos limpios y mantenibles

#### 3. Seguridad Reforzada ğŸ›¡ï¸

- Incluye mÃ³dulos como Pausable, ReentrancyGuard, roles
- Protegen contra vulnerabilidades comunes

#### 4. Contratos EstÃ¡ndares Listos ğŸš€

- Plantillas para tokens, gobernanza, permisos y mÃ¡s
- Bloques listos que aceleran desarrollo

---

## MÃ³dulos de OpenZeppelin

### 1. Access Control ğŸ”

**GestiÃ³n de roles y permisos**:
- Ownable
- AccessControl
- Roles

### 2. Tokens ğŸª™

**Implementaciones estÃ¡ndar**:
- Tokens fungibles
- Tokens no fungibles (NFTs)

### 3. Security ğŸ›¡ï¸

**MÃ³dulos de protecciÃ³n**:
- Pausable
- ReentrancyGuard
- Timelocks

### 4. Compliance âš–ï¸

**Herramientas para regulaciones**:
- Freeze
- Approvals
- Whitelisting

### 5. Upgrades ğŸ”„

**Patrones proxy**:
- Contratos actualizables
- Sin perder estado

### 6. Utilities ğŸ§°

**Funciones auxiliares**:
- Math
- Strings
- Bitmaps
- Events

---

## Herramientas del Ecosistema

### Stellar Expert

**DefiniciÃ³n**: El explorador mÃ¡s completo del ecosistema Stellar.

**Funciones**:
- ğŸ“Š **MÃ©tricas de la Red**: Validadores, actividad, bloques, volumen
- ğŸ“ **Transacciones y Cuentas**: Inspeccionar cualquier transacciÃ³n, cuenta o activo
- ğŸ” **Contratos y Eventos**: Revisar contratos desplegados, logs, storage, mÃ©todos invocados
- ğŸ› **AnÃ¡lisis de Contratos**: Ideal para debugging y auditorÃ­a

**Uso**: Validar lo que realmente sucediÃ³ en la red (deploys, llamadas, eventos, cambios de estado).

---

### Stellar Lab

**DefiniciÃ³n**: Herramienta para construir, firmar y enviar transacciones sin escribir backend.

**Funcionalidades**:

#### 1. ConstrucciÃ³n de Transacciones
- Crear operaciones complejas
- Ver estructura real de transacciones

#### 2. Herramientas de Debugging
- Simular operaciones
- Revisar errores
- Inspeccionar payload
- Entender comportamiento antes de enviar

#### 3. Testing e InteracciÃ³n con Contratos
- Invocar mÃ©todos
- Enviar parÃ¡metros
- Simular ejecuciones
- Ver respuestas en tiempo real

---

## Workflow de Desarrollo

```
1. DiseÃ±ar contrato
   â””â”€ Seguir buenas prÃ¡cticas

2. Implementar usando OpenZeppelin
   â””â”€ MÃ³dulos probados y seguros

3. Testear localmente
   â””â”€ Unit tests

4. Desplegar en Testnet
   â””â”€ Usar Stellar Lab

5. Validar en Stellar Expert
   â””â”€ Revisar eventos y estado

6. Debugging
   â””â”€ Stellar Lab + Expert

7. Desplegar en Mainnet
   â””â”€ Cuando todo estÃ¡ validado
```

---

## Recursos del Instructor

**MatÃ­as Aguilar**:
- ğŸ¥ YouTube: https://www.youtube.com/@aguilar1x
- ğŸ’» GitHub: https://github.com/aguilar1x
- ğŸ¦ X/Twitter: https://x.com/aguilar1x1

---

## Resumen Clave DÃ­a 2

### Stellar
- Red financiera global, no computadora global
- Consenso SCP: federado, rÃ¡pido, eficiente
- Enfoque en pagos, stablecoins y productos financieros reales
- "Confiable siempre gana"

### Smart Contracts
- Soroban: Motor basado en Rust + WASM
- EstÃ¡ndares SEP/CAP para interoperabilidad
- OpenZeppelin: CÃ³digo auditado y modular
- Herramientas: Stellar Lab (desarrollo) y Stellar Expert (explorador)

### Buenas PrÃ¡cticas
- Seguridad: Evitar overflows, controlar acceso
- DiseÃ±o: Modular, eventos claros, storage explÃ­cito
- Testing: Unit tests, escenarios adversos
- OptimizaciÃ³n: Minimizar storage, evitar loops innecesarios

---

> "El desarrollo de smart contracts no se trata solo de escribir cÃ³digo que funcione,  
> sino de escribir cÃ³digo que sea seguro, eficiente y mantenible."
